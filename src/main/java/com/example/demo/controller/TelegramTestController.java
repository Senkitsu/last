package com.example.demo.controller;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;
import io.swagger.v3.oas.annotations.Operation;
import io.swagger.v3.oas.annotations.tags.Tag;


@RestController
@Tag(name = "telegram-controller", description = "–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–µ–ª–µ–≥—Ä–∞–º–º –±–æ—Ç–æ–º")
public class TelegramTestController {
    
    private static final Logger log = LoggerFactory.getLogger(TelegramTestController.class);
    
    @Operation(
        summary = "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫",
        description = """
            –≠—Ç–æ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç –∏–º–∏—Ç–∏—Ä—É–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Telegram.
            
            ### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç:
            1. –§–æ—Ä–º–∏—Ä—É–µ—Ç —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
            2. –°–æ–∑–¥–∞–µ—Ç –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
            3. –õ–æ–≥–∏—Ä—É–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ —Å –ø–æ–ª–Ω—ã–º —Å—Ç–µ–∫—Ç—Ä–µ–π—Å–æ–º
            4. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Telegram —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Appender
            
            ### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
            - –í –ª–æ–≥–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–æ—è–≤–∏—Ç—Å—è –∑–∞–ø–∏—Å—å –æ–± –æ—à–∏–±–∫–µ
            - –í Telegram-–∫–∞–Ω–∞–ª/—á–∞—Ç –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω Telegram Appender)
            """,
        tags = {"telegram-controller"}
    )
    @GetMapping("/test/telegram-error")
    public String testError() {
        log.error("üö® –¢–ï–°–¢–û–í–ê–Ø –û–®–ò–ë–ö–ê –¥–ª—è Telegram –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è!");
        
        try {
            throw new RuntimeException("–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: —Ç–µ—Å—Ç Telegram –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è " + System.currentTimeMillis());
        } catch (RuntimeException e) {
            log.error("‚ùå –û–®–ò–ë–ö–ê —Å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º", e);
        }
        
        return "–¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Telegram! –î–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ.";
    }
    
    @Operation(
        summary = "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π",
        description = """
            –≠—Ç–æ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π —É—Ä–æ–≤–Ω—è WARN.
            
            ### –í–∞–∂–Ω–æ:
            - –°–æ–æ–±—â–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è WARN –º–æ–≥—É—Ç –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –≤ Telegram, –µ—Å–ª–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è 
              —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å ERROR
            - –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ —É—Ä–æ–≤–Ω—è–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
            
            ### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
            –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, –∫–∞–∫–∏–µ —É—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram
            """,
        tags = {"telegram-controller"}
    )
    @GetMapping("/test/telegram-warn")
    public String testWarn() {
        log.warn("‚ö†Ô∏è –¢–µ—Å—Ç–æ–≤–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –¥–ª—è Telegram (–º–æ–∂–µ—Ç –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è, –µ—Å–ª–∏ —É—Ä–æ–≤–µ–Ω—å ERROR)");
        return "–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ (–µ—Å–ª–∏ —É—Ä–æ–≤–µ–Ω—å >= WARN)";
    }
    
    @Operation(
        summary = "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è",
        description = """
            –≠—Ç–æ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.
            
            ### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
            - –°–æ–æ–±—â–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è INFO –æ–±—ã—á–Ω–æ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ Telegram (—Ç–æ–ª—å–∫–æ –≤ –ª–æ–∫–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏)
            - –ü–æ–º–æ–≥–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—â—É—é —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
            - –ü–æ–ª–µ–∑–µ–Ω –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
            
            ### –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:
            –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ—è–≤–∏—Ç—Å—è –≤ –ª–æ–≥–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –Ω–æ —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è –≤ Telegram
            """,
        tags = {"telegram-controller"}
    )
    @GetMapping("/test/telegram-info")
    public String testInfo() {
        log.info("‚ÑπÔ∏è –¢–µ—Å—Ç–æ–≤–æ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ");
        return "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ";
    }
    
    @Operation(
        summary = "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è",
        description = """
            –≠—Ç–æ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ª–∞–¥–æ—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.
            
            ### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
            - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
            - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ —Å—Ä–µ–¥–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
            - –û—Ç–ª–∞–¥–∫–∞ —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
            
            ### –í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
            - –£—Ä–æ–≤–µ–Ω—å DEBUG –æ–±—ã—á–Ω–æ –≤–∫–ª—é—á–µ–Ω —Ç–æ–ª—å–∫–æ –≤ —Å—Ä–µ–¥–∞—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
            - –í production —Å—Ä–µ–¥–µ —ç—Ç–æ—Ç —É—Ä–æ–≤–µ–Ω—å —á–∞—Å—Ç–æ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
            - –°–æ–æ–±—â–µ–Ω–∏—è —ç—Ç–æ–≥–æ —É—Ä–æ–≤–Ω—è –ø–æ—á—Ç–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ Telegram
            """,
        tags = {"telegram-controller"}
    )
    @GetMapping("/test/telegram-debug")
    public String testDebug() {
        log.debug("üîç –¢–µ—Å—Ç–æ–≤–æ–µ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ");
        return "–û—Ç–ª–∞–¥–æ—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ";
    }
}